<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" type="text/css" href="/CemeteryListingsWebApp/resources/css/blackAndWhite.css">
    <link rel="stylesheet" type="text/css" href="/CemeteryListingsWebApp/resources/css/listing-pages.css">
    <script type="text/javascript" src="/CemeteryListingsWebApp/resources/js/jquery-1.11.1.min.js"></script>
    <script type="text/javascript" src="/CemeteryListingsWebApp/resources/js/scripts/script.js"></script>
     <script type="text/javascript" src="/CemeteryListingsWebApp/resources/js/plugins/cookies-plugin/jquery.cookie.js"></script>
</head>

<body class="siteWrapper">
    <div class="pageHeader">
        <a href="#" class="logo"><img src="/CemeteryListingsWebApp/resources/images/logo2.jpg"></a>
                <ul class="navList" style="width : 100%">
                    
                </ul>   
            </div>
            <div class="dummyHeader"></div>
    <div class="pageWrapper">
        
        <div class="contentWrapper">
             <table class="listings"></table>
        </div>
    </div>
    <div class="siteFooter"> 
    </div>

     <!--<script type="text/javascript" src="/CemeteryListingsWebApp/resources/js/jquery-1.11.1.min.js"></script> -->
        
        <script type="text/javascript">
        	$.ajax({ // ajax call to retrieve all cemeteries json objects 
                    type: "GET",
                    url: "/CemeteryListingsWebApp/api/cemetery/show",
                    dataType: "json",
                    success: function (data) {
                        console.log('success');
                        console.log(data);
                        //console.log(data[0]['contactName']);
                        countData = data.length;
                        for(var i = 0; i < data.length; i++) {
                            var obj = data[i];
                                console.log(obj.id);
                                console.log(obj.location.country);
                                console.log(obj.location.province_State);
                                console.log(obj.location.district_state);
                                console.log(obj.location.town);
                                console.log(obj.location.cemeteryName);
                                console.log(obj.location.locationOfCemetery);
                                console.log(obj.contactName);
                                console.log(obj.contactNumber);
                            // building html objects here
                            $(".listings").append(' <tr>'+' <td><a href='+'"/CemeteryListingsWebApp/api/cemetery/id/'+obj.id+'">' + '</a></td>' + '<td>Cemetery Name : ' + obj.location.cemeteryName + '</td>' + ' <td> Location - Country : ' + obj.location.country + 
                                '</td>' + '<td> <button class="goToDetails" text="details" value='+obj.id+'>' + '</td>' + "</tr>"); 

                                    }
                                 },

                                                error: function (jqXHR, status) {
                                                    // error handler
                                                    console.log(jqXHR);
                                                    alert('fail' + status.code);
                                                }
                                             });
        </script>

</body>
</html>